// Copyright (c) 2025 The Stdlib Authors. License is Apache-2.0: http://www.apache.org/licenses/LICENSE-2.0
/// <reference types="./index.d.ts" />
import e from"https://cdn.jsdelivr.net/gh/stdlib-js/utils-define-nonenumerable-read-only-property@v0.2.1-esm/index.mjs";import t from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-has-property@v0.2.2-esm/index.mjs";import s from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-ndarray-like@v0.2.2-esm/index.mjs";import r from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-object@v0.2.2-esm/index.mjs";import i from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-function@v0.2.2-esm/index.mjs";import n from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-collection@v0.2.2-esm/index.mjs";import a from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-empty-collection@v0.2.2-esm/index.mjs";import d from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-function-array@v0.2.2-esm/index.mjs";import o from"https://cdn.jsdelivr.net/gh/stdlib-js/ndarray-base-assert-is-data-type@v0.2.2-esm/index.mjs";import m from"https://cdn.jsdelivr.net/gh/stdlib-js/ndarray-base-assert-is-output-data-type-policy@esm/index.mjs";import p from"https://cdn.jsdelivr.net/gh/stdlib-js/ndarray-base-assert-is-input-casting-policy@esm/index.mjs";import l from"https://cdn.jsdelivr.net/gh/stdlib-js/ndarray-base-assert-is-equal-data-type@esm/index.mjs";import h from"https://cdn.jsdelivr.net/gh/stdlib-js/array-base-assert-contains@v0.2.2-esm/index.mjs";import y from"https://cdn.jsdelivr.net/gh/stdlib-js/ndarray-base-binary-reduce-strided1d@esm/index.mjs";import u from"https://cdn.jsdelivr.net/gh/stdlib-js/ndarray-base-binary-output-dtype@esm/index.mjs";import j from"https://cdn.jsdelivr.net/gh/stdlib-js/ndarray-base-binary-input-casting-dtype@esm/index.mjs";import f from"https://cdn.jsdelivr.net/gh/stdlib-js/ndarray-base-dtypes2enums@esm/index.mjs";import g from"https://cdn.jsdelivr.net/gh/stdlib-js/ndarray-base-dtypes2strings@esm/index.mjs";import c from"https://cdn.jsdelivr.net/gh/stdlib-js/ndarray-base-dtype-resolve-str@v0.2.2-esm/index.mjs";import v from"https://cdn.jsdelivr.net/gh/stdlib-js/ndarray-base-spread-dimensions@esm/index.mjs";import b from"https://cdn.jsdelivr.net/gh/stdlib-js/ndarray-shape@v0.2.2-esm/index.mjs";import w from"https://cdn.jsdelivr.net/gh/stdlib-js/ndarray-ndims@v0.2.2-esm/index.mjs";import x from"https://cdn.jsdelivr.net/gh/stdlib-js/ndarray-base-dtype@v0.2.2-esm/index.mjs";import E from"https://cdn.jsdelivr.net/gh/stdlib-js/ndarray-base-order@v0.2.2-esm/index.mjs";import _ from"https://cdn.jsdelivr.net/gh/stdlib-js/ndarray-base-assign@v0.1.1-esm/index.mjs";import T from"https://cdn.jsdelivr.net/gh/stdlib-js/ndarray-base-empty@v0.3.0-esm/index.mjs";import k from"https://cdn.jsdelivr.net/gh/stdlib-js/ndarray-empty@v0.3.0-esm/index.mjs";import F from"https://cdn.jsdelivr.net/gh/stdlib-js/array-base-indices-complement@esm/index.mjs";import S from"https://cdn.jsdelivr.net/gh/stdlib-js/array-base-take-indexed@v0.2.2-esm/index.mjs";import V from"https://cdn.jsdelivr.net/gh/stdlib-js/array-base-zero-to@v0.2.1-esm/index.mjs";import D from"https://cdn.jsdelivr.net/gh/stdlib-js/array-base-join@v0.1.1-esm/index.mjs";import A from"https://cdn.jsdelivr.net/gh/stdlib-js/array-base-copy@v0.2.2-esm/index.mjs";import I from"https://cdn.jsdelivr.net/gh/stdlib-js/array-base-insert-at@esm/index.mjs";import O from"https://cdn.jsdelivr.net/gh/stdlib-js/array-base-every-by@v0.2.2-esm/index.mjs";import{ndarray as q}from"https://cdn.jsdelivr.net/gh/stdlib-js/blas-ext-base-gindex-of-row@v0.0.0-esm/index.mjs";import z from"https://cdn.jsdelivr.net/gh/stdlib-js/object-assign@v0.2.2-esm/index.mjs";import L from"https://cdn.jsdelivr.net/gh/stdlib-js/error-tools-fmtprodmsg@v0.2.2-esm/index.mjs";import R from"https://cdn.jsdelivr.net/gh/stdlib-js/ndarray-defaults@v0.3.0-esm/index.mjs";import B from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-plain-object@v0.2.2-esm/index.mjs";import C from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-has-own-property@v0.2.2-esm/index.mjs";import{isPrimitive as G}from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-boolean@v0.2.2-esm/index.mjs";import{primitives as H}from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-integer-array@v0.2.2-esm/index.mjs";import J from"https://cdn.jsdelivr.net/gh/stdlib-js/ndarray-base-to-unique-normalized-indices@esm/index.mjs";var K={dims:null,keepdims:!1};function M(e,t,s,r){var i;if(!B(r))return new TypeError(L("null2V",r));if(C(r,"keepdims")&&(e.keepdims=r.keepdims,!G(e.keepdims)))return new TypeError(L("null2o","keepdims",e.keepdims));if(C(r,"dims")){if(e.dims=r.dims,!H(e.dims)&&!a(e.dims))return new TypeError(L("invalid option. `%s` option must be an array of integers. Option: `%s`.","dims",e.dims));if(null===(i=J(e.dims,t-1)))return new RangeError(L("invalid option. `%s` option contains an out-of-bounds dimension index. Option: [%s].","dims",D(e.dims,",")));if(i.length!==e.dims.length)return new Error(L("invalid option. `%s` option contains duplicate indices. Option: [%s].","dims",D(e.dims,",")));e.dims=i}return C(r,"dtype")&&(e.dtype=r.dtype,!h(s,c(e.dtype)))?new TypeError(L("null4S","dtype",D(s,'", "'),e.dtype)):null}var N=R.get("order");function P(e,s,l,h){var y,u;if(!(this instanceof P))return new P(e,s,l,h);if(!r(e))throw new TypeError(L("null3L",e));if(!i(e.default))throw new TypeError(L('invalid argument. First argument must be an object having a "default" property and an associated method.'));if(t(e,"types")&&!n(e.types)&&!a(e.types))throw new TypeError(L('invalid argument. First argument must be an object having a "types" property whose associated value is an array-like object.'));if(t(e,"fcns")&&!d(e.fcns)&&!a(e.fcns))throw new TypeError(L('invalid argument. First argument must be an object having a "fcns" property whose associated value is an array-like object containing functions.'));if(!n(s))throw new TypeError(L("null2y",s));for(s=A(s),u=0;u<s.length;u++){if(y=s[u],!n(y)||y.length<1||!O(y,o))throw new TypeError(L("invalid argument. Second argument must contain arrays of data types. Value: `%s`.",s));s[u]=g(y)}if(!n(l)||l.length<1||!O(l,o))throw new TypeError(L("invalid argument. Third argument must be an array of data types. Value: `%s`.",l));if(l=g(l),!r(h))throw new TypeError(L("null43",e));if(!m(h.output))throw new TypeError(L("invalid argument. Fourth argument must be an object having a supported output data type policy. Value: `%s`.",h.output));if(!p(h.casting))throw new TypeError(L("invalid argument. Fourth argument must be an object having a supported casting policy. Value: `%s`.",h.casting));if(this._table={default:e.default,types:e.types?f(e.types):[],fcns:e.fcns?A(e.fcns):[]},this._table.types.length!==2*this._table.fcns.length)throw new Error("invalid argument. First argument specifies an unexpected number of types. Two input ndarray data types must be specified for each provided strided function.");return this._idtypes=s,this._odtypes=l,this._policies={output:h.output,casting:h.casting},this}e(P.prototype,"apply",(function(e,t){var r,i,n,a,d,o,m,p,g,w,A,O,R,B,C,G,H,J,P,Q,U,W,X;if(i=arguments.length,!s(e))throw new TypeError(L("null5t",e));if(!s(t))throw new TypeError(L("invalid argument. Second argument must be an ndarray-like object. Value: `%s`.",t));if(C=x(e),!h(this._idtypes[0],c(C)))throw new TypeError(L('invalid argument. First argument must have one of the following data types: "%s". Data type: `%s`.',D(this._idtypes[0],'", "'),C));if(G=x(t),!h(this._idtypes[1],c(G)))throw new TypeError(L('invalid argument. Second argument must have one of the following data types: "%s". Data type: `%s`.',D(this._idtypes[1],'", "'),G));for(n=[e,t],W=2;W<i&&s(R=arguments[W]);W++){if(J=x(R),!h(this._idtypes[W],c(J)))throw new TypeError(L('invalid argument. Argument %d must have one of the following data types: "%s". Data type: `%s`.',W,D(this._idtypes[W],'", "'),J));n.push(R)}if(W<i-1)throw new TypeError(L("invalid argument. Argument %d must be an ndarray-like object. Value: `%s`.",W,arguments[W]));if(w=b(e),A=b(t),w.length!==A.length)throw new Error(L("invalid argument. Input arrays must have the same number of dimensions. First array dimensions: %d. Second array dimensions: %d.",w.length,A.length));for(Q=w.length,X=0;X<Q;X++)if(w[X]!==A[X])throw new Error(L("invalid argument. Input arrays must have the same shape. First array shape: [%s]. Second array shape: [%s].",D(w,","),D(A,",")));if(a=z({},K),i>W&&(r=arguments[i-1],p=M(a,Q,this._odtypes,r)))throw p;return null===a.dims&&(a.dims=V(Q)),g=F(Q,a.dims),O=S(w,g),m=(d=E(e))===(o=E(t))?d:N,H=a.dtype||u(C,G,this._policies.output),U=k(O,{dtype:H,order:m}),J=j(C,G,H,this._policies.casting),l(C,J)||(B=T(J,w,d),_([e,B]),n[0]=B,C=J),J=j(G,C,H,this._policies.casting),l(G,J)||(B=T(J,A,o),_([t,B]),n[1]=B,G=J),P=(W=q(this._table.fcns.length,2,this._table.types,2,1,0,f([C,G]),1,0))>=0?this._table.fcns[W]:this._table.default,y(P,I(n,2,U),a.dims),a.keepdims&&(U=v(Q,U,g,!0)),U})),e(P.prototype,"assign",(function e(t,r){var i,n,a,d,o,m,p,u,g,v,_,k,F,S,A,O,R,B,C;if(n=arguments.length,!s(t))throw new TypeError(L("null5t",t));if(!s(r))throw new TypeError(L("invalid argument. Second argument must be an ndarray-like object. Value: `%s`.",r));if(v=x(t),!h(this._idtypes[0],c(v)))throw new TypeError(L('invalid argument. First argument must have one of the following data types: "%s". Data type: `%s`.',D(this._idtypes[0],'", "'),v));if(_=x(r),!h(this._idtypes[1],c(_)))throw new TypeError(L('invalid argument. Second argument must have one of the following data types: "%s". Data type: `%s`.',D(this._idtypes[1],'", "'),_));if(u=b(t),g=b(r),u.length!==g.length)throw new Error(L("invalid argument. Input arrays must have the same number of dimensions. First array dimensions: %d. Second array dimensions: %d.",u.length,g.length));for(A=u.length,C=0;C<A;C++)if(u[C]!==g[C])throw new Error(L("invalid argument. Input arrays must have the same shape. First array shape: [%s]. Second array shape: [%s].",D(u,","),D(g,",")));for(d=[t,r],B=2;B<n&&s(o=arguments[B]);B++)d.push(o);if(B<3)throw new TypeError(L("invalid argument. Third argument must be an ndarray-like object. Value: `%s`.",arguments[2]));if(B===n-1)i=arguments[B],p=!0;else if(B<n-1)throw new TypeError(L("invalid argument. Argument %d must be an ndarray-like object. Value: `%s`.",B,arguments[B]));for(R=d.pop(),B=2;B<d.length;B++)if(S=x(d[B]),!h(this._idtypes[B],c(S)))throw new TypeError(L('invalid argument. Argument %d must have one of the following data types: "%s". Data type: `%s`.',B,D(this._idtypes[B],'", "'),S));if(A=w(t),a=z({},K),p&&(m=M(a,A,this._odtypes,i)))throw m;return null===a.dims&&(a.dims=V(A)),k=x(R),S=j(v,_,k,this._policies.casting),l(v,S)||(e([t,F=T(S,u,E(t))]),d[0]=F,v=S),S=j(_,v,k,this._policies.casting),l(_,S)||(e([r,F=T(S,g,E(r))]),d[1]=F,_=S),O=(B=q(this._table.fcns.length,2,this._table.types,2,1,0,f([v,_]),1,0))>=0?this._table.fcns[B]:this._table.default,y(O,I(d,2,R),a.dims),R}));export{P as default};
//# sourceMappingURL=index.mjs.map
